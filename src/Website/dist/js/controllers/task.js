define(["app","app.config","disabled-when-click"],function(e,a){e.controller("task",["$scope","$routeParams",function(e,a){if(e.taskDetail=e.sessionStorage.currentTask,e.Model={},e.taskDetail){var t=a.tokenID,n=a.instanceID;e.getDetail=function(a,t,n){return e._request("TaskDetail",{InstanceId:t,TokenId:a},n).then(function(a){return e.path=a.Data.Page,angular.extend(e.taskDetail,a.Data),a})},e.handle=function(a){return e._request("Process",{InstanceId:e.taskDetail.InstanceId,TokenId:e.taskDetail.TokenID,DefineName:e.taskDetail.DefineName,TokenName:e.taskDetail.TokenName,TransitionName:e.taskDetail.TransitionName,TemplateName:e.taskDetail.Page,TemplateData:JSON.stringify(e.Model),TransitionName:a.TransitionName}).then(function(a){e._goto("/default")})},e.getDetail(t,n,!0)}else e._goto("/default")}])});