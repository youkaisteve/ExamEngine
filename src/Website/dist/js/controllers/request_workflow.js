define(["app","team-select","custom-select","disabled-when-click","process"],function(e){e.controller("request_workflow",["$scope","$window","Process",function(e,o,t){function n(e){var o={};o.ProcessName=e.ProcessName.ProcessName,o.NodeTeams=[];for(var t in e.NodeTeams)o.NodeTeams.push({NodeName:t,TeamName:e.NodeTeams[t]});return o}e.teamSource=[],e.workflows=[{text:"--请选择--",value:-1}],e.selectedWorkflow="",e.getAllWorkflows=function(o){return t.getAllProcess(o).then(function(o){e.workflows=t.convertToKV(o.Data.AllProcess),angular.forEach(o.Data.Teams,function(o){e.teamSource.push({text:o,value:o})})})},e.changeWorkflow=function(o){-1!=o.newValue&&(e.selectedWorkflow=o.newValue)},e.initExam=function(t){return e._request("InitExam",n(t)).then(function(t){o.alert("发起流程成功"),e._goto("/default")})},e.getAllWorkflows(!0)}])});